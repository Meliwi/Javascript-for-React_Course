<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/styles.css">
    <title>Quemador de calor칤as</title>
</head>
<body>
    <main>
        <div class="wrapper">
          <details>
            <summary>
              救넖잺 explicaci칩n
            </summary>
            <p>El libro, Convert Anything to Calories, lleg칩 a la conclusi칩n de que, en promedio, una persona con un dedo
              indice
              de
              10.8 cm^3 y de 11.7 gramos necesitar치 muuuchos clicks para conservar la l칤nea. Se requieren 16.7 micromoles de
              adenos칤n
              trifosfato (la mol칠cula que transporta energ칤a entre las c칠lulas) para mover un gramo del cuerpo por un
              segundo,
              y
              como
              hay 7.3 calor칤as en un mol (la medida de cantidad de una sustancia) de adenos칤n trifosfato, en teor칤a, cada
              click
              del
              mouse deber칤a quemar 1.42 calor칤as. Aunque el c치lculo asume el movimiento de todo el m칰sculo, por lo que la
              cantidad
              real puede variar un poco.</p>
            <p>Pero resulta que es s치bado y tienes hambre. treinta minutos despu칠s te llega una pizza (1,835kCal) con una
              coca
              (97kCal), tendr칤as que hacer 1,360,563 clicks para quemar la cena. Y c칩mo es s치bado seguramente involucrar치
              unas cuantas
              bebidas alcoh칩licas: en un Gin & Tonic (120kCal) hay 84,507 clicks, y 131,690.14 por cada cerveza que
              consumas. En otras
              palabras, con 427 clicks en promedio por d칤a, la computadora no es un buen ejercicio.
            </p>
          </details>
          <h1>Quemador de calor칤as</h1>
          <p class="result" id="result"></p>
          <p class="result" id="resultcounter"></p>
          <button id="burn" class="burn">游댠</button>
        </div>
      </main>
      <script>
        //creamos la funci칩n createStore, es la base de redux, la cual recibe a reducer y al estado inicial 
        const createStore = (reducer, initialState) => {
            //creamos una variable donde se guarda el estado inicial actual 
            let state = initialState
            
            //funci칩n vac칤a 
            let updater = () => {}
             //Esta funci칩n me devuelve el estado actual  
            const getState = () => state

            //Esta funci칩n es con la que se invocan cambios en el estado
            const dispatch = (action) => {
               state = reducer(state,action)
               updater()
            }

            /*Esta funci칩n se ejecuta cada vez que ocurre alg칰n cambio. Recibe 
            una funci칩n que se almacena en la funci칩n vacia updater definida 
            anteriormente 
            */
            const subscribe = (listener) => {
                updater = listener
            }
             return {
                getState,
                dispatch,
                subscribe
            }
        }

        /*reducer es una funci칩n que eval칰a los comportamientos de mis acciones, es decir
        que las acciones describen algo que pas칩, y los reducers se encargan de especificar como 
        cambi칩 el estado de la aplicaci칩n 
        */
        const reducer = (state, action) => {
          let {calorias, caloriasRestantes} = state
          switch(action.type){
            case 'BURN':
              calorias += 1.42
              return{...state,calorias}
            case 'LESS-BURN':
              caloriasRestantes -= 1.42
              return{...state,caloriasRestantes}
            default:
              return state
          }
        }
        //store almacena a lo que devuelve la funci칩n createStore  
        //El estado inicial ser치 un n칰mero cero (recordar que esto puede ser cualquier cosa)
        const store = createStore(reducer,{calorias:0, caloriasRestantes:1360563})

        store.subscribe(() => {
            //Mostramos en pantalla los resultados
            const {calorias, caloriasRestantes} = store.getState();
            window.result.textContent = `Has quemado ${calorias} calor칤as`
            window.resultcounter.textContent = `Te falta quemar ${caloriasRestantes} calor칤as de la cena `

        })

        /*Para que quede m치s claro, las acciones son un bloque de informaci칩n que envia
        datos desde tu aplicaci칩n a tu store, estas acciones son la unica fuente de 
        informaci칩n para el store y se envian usando store.dispatch() en react*/
        const burn = () =>{
          store.dispatch({
            type: 'BURN',
            payload: 1.42,
          });
          store.dispatch({
            type: 'LESS-BURN',
            payload:1.42,
          })
        }
        //Detectar un click, entonces se a침ade un evento 
        window.burn.addEventListener('click', burn)
      </script>
</body>
</html>